# 将来実装予定の機能・改善

## POST /api/pictures - 画像アップロードAPI

### Phase 1 (現在実装中)
- **Level 2実装**: EXIF除去 + サムネイル生成
- **単一ファイル対応**: 1回のリクエストで1枚の画像
- **軽量版レスポンス**: 必要最小限の情報返却

### Phase 2 (将来実装)

#### 1. バッチアップロード機能
- **複数ファイル同時アップロード**: 一度に複数画像を処理
- **プログレス表示**: アップロード進捗の追跡
- **部分失敗対応**: 一部ファイルが失敗した場合の処理

#### 2. 高度な画像処理
- **画像最適化**: ファイルサイズの自動圧縮
- **形式変換**: WebP への自動変換（ブラウザ対応時）
- **リサイズ**: 複数サイズでの保存（small, medium, large）

#### 3. メタデータ強化
- **位置情報抽出**: GPS データからの場所情報取得
- **撮影機器情報**: カメラ・レンズ情報の自動入力
- **顔認識**: 写っている人物の自動検出（プライバシー配慮）

#### 4. パフォーマンス改善
- **非同期処理**: サムネイル生成をバックグラウンド実行
- **ストリーミングアップロード**: 大容量ファイル対応
- **キャッシュ機能**: 重複画像の検出・回避

#### 5. ユーザビリティ向上
- **ドラッグ&ドロップUI**: ブラウザでの直感的操作
- **プレビュー機能**: アップロード前の画像確認
- **一括メタデータ編集**: 複数画像の情報を一度に更新

#### 6. セキュリティ強化
- **ウイルススキャン**: アップロードファイルの安全性確認
- **透かし追加**: 家族IDによる画像への識別子埋め込み
- **アクセスログ**: 詳細な操作履歴の記録

## その他のPictures API

### PUT/PATCH /api/pictures/:id - 写真情報更新
- タイトル、説明、カテゴリの変更
- 撮影日時の手動修正
- 操作ログの記録

### DELETE /api/pictures/:id - 写真削除
- 論理削除（status=0）
- 物理ファイルの削除オプション
- 削除確認メカニズム

## 技術的改善

### データベース最適化
- インデックス最適化（family_id, taken_date等）
- パーティショニング（年月別）
- 重複画像検出（ハッシュベース）

### ストレージ最適化
- CDN対応（Amazon CloudFront等）
- バックアップ戦略（定期的な外部保存）
- 容量監視・アラート機能

### 監視・運用
- ヘルスチェックエンドポイント
- メトリクス収集（アップロード数、エラー率等）
- ログ分析・可視化

---

*最終更新: 2025-09-22*
*Phase 1実装完了後、優先度順に実装予定*